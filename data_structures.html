<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Core Data Structures &mdash; pyfluo  documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyfluo  documentation" href="index.html" />
    <link rel="next" title="Core Functions" href="functions.html" />
    <link rel="prev" title="About this library" href="introduction.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="functions.html" title="Core Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="About this library"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyfluo  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="core-data-structures">
<h1>Core Data Structures<a class="headerlink" href="#core-data-structures" title="Permalink to this headline">¶</a></h1>
<p>The advantage of pyfluo is that its core data structures are subclasses of numpy&#8217;s ndarray. This means that by and large, native numpy operations work on pyfluo Movies, Traces, ROIs, etc. However, these objects also store other data, including frame rates, time vectors, associated points, information, etc. where applicable. The biggest challenge in development has been to properly handle the advanced slicing, and as such, some features may break when slicing pyfluo objects. If this occurs, you can always retrieve raw forms of your data using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">raw_data</span> <span class="o">=</span> <span class="n">my_obj</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>
</pre></div>
</div>
<p>where my_obj can be a Movie, Trace, ROI, etc. This page is a summary (albeit incomplete) of the important data structures.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#traces.Trace" title="traces.Trace"><code class="xref py py-obj docutils literal"><span class="pre">traces.Trace</span></code></a></td>
<td>An object to hold one or more data vectors along with a single time vector</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#movies.Movie" title="movies.Movie"><code class="xref py py-obj docutils literal"><span class="pre">movies.Movie</span></code></a></td>
<td>An object storing n sequential 2d images along with a time vector</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#roi.ROI" title="roi.ROI"><code class="xref py py-obj docutils literal"><span class="pre">roi.ROI</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>An object storing ROI information for 1 or more ROIs</td>
</tr>
</tbody>
</table>
<div class="section" id="traces">
<h2>Traces<a class="headerlink" href="#traces" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="traces.Trace">
<em class="property">class </em><code class="descclassname">traces.</code><code class="descname">Trace</code><a class="headerlink" href="#traces.Trace" title="Permalink to this definition">¶</a></dt>
<dd><p>An object to hold one or more data vectors along with a single time vector</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>input data, either 1d or 2d. Details below</dd>
<dt>time <span class="classifier-delimiter">:</span> <span class="classifier">[optional] np.ndarray, list </span></dt>
<dd>time vector with n elements</dd>
<dt>Ts <span class="classifier-delimiter">:</span> <span class="classifier">[optional] float</span></dt>
<dd>sampling period</dd>
<dt>info <span class="classifier-delimiter">:</span> <span class="classifier">[optional] list, np.ndarray</span></dt>
<dd>info vector with n elements</dd>
</dl>
<p>The data in Trace objects is stored following the standard pyfluo convention in which the 0th axis corresponds to time. For example, trace[0] corresponds to the data at time 0.</p>
<p>This object can be used to store multiple time series of data, for example the traces corresponding to multiple ROIs in a movie. In this case, the above convention still holds, and trace[0] will supply an n-length vector corresponding to n series of data at time 0.</p>
<p>It should be noted that error checking with regard to the time vector is still under progress. All tested operations are functional, but thorough testing has not yet been performed.</p>
<dl class="method">
<dt id="traces.Trace.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><em>minmax=(0.0</em>, <em>1.0)</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="headerlink" href="#traces.Trace.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the data</p>
<dl class="docutils">
<dt>minmax <span class="classifier-delimiter">:</span> <span class="classifier">list, tuple </span></dt>
<dd><code class="docutils literal"><span class="pre">[post_normalizaton_data_min,</span> <span class="pre">max]</span></code></dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int </span></dt>
<dd>axis over which to normalize</dd>
</dl>
<p>A new Trace object, normalized</p>
</dd></dl>

<dl class="method">
<dt id="traces.Trace.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>stacked=True</em>, <em>subtract_minimum=False</em>, <em>cmap=&lt;matplotlib.colors.LinearSegmentedColormap object&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#traces.Trace.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the data</p>
<dl class="docutils">
<dt>stacked <span class="classifier-delimiter">:</span> <span class="classifier">bool </span></dt>
<dd>for multiple columns of data, stack instead of overlaying</dd>
<dt>subtract_minimum <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>subtract minimum from each individual trace</dd>
<dt>cmap <span class="classifier-delimiter">:</span> <span class="classifier">matplotlib.LinearSegmentedColormap</span></dt>
<dd>color map for display. Options are found in pl.colormaps(), and are accessed as pl.cm.my_favourite_map</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>any arguments accepted by matplotlib.plot</dd>
</dl>
<p>The matplotlib axes object corresponding to the data plot</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="movie">
<h2>Movie<a class="headerlink" href="#movie" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="movies.Movie">
<em class="property">class </em><code class="descclassname">movies.</code><code class="descname">Movie</code><a class="headerlink" href="#movies.Movie" title="Permalink to this definition">¶</a></dt>
<dd><p>An object storing n sequential 2d images along with a time vector</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, str, pyfluo.Tiff </span></dt>
<dd>input data, see below</dd>
<dt>time <span class="classifier-delimiter">:</span> <span class="classifier">[optional] np.ndarray, list</span></dt>
<dd>time vector with n elements</dd>
<dt>Ts <span class="classifier-delimiter">:</span> <span class="classifier">[optional] float</span></dt>
<dd>sampling period</dd>
<dt>info <span class="classifier-delimiter">:</span> <span class="classifier">[optional] list, np.ndarray</span></dt>
<dd>info vector with n elements</dd>
</dl>
<p>Input data can be supplied in multiple ways:
(1) as a numpy array of shape (n,y,x)
(2) a string corresopnding to a file path to a tiff
(3) a pyfluo.Tiff object</p>
<p>The data in Movie objects is stored following the standard pyfluo convention in which the 0th axis corresponds to time. For example, movie[0] corresponds to the movie frame at time 0.</p>
<p>It should be noted that error checking with regard to the time vector is still under progress. All tested operations are functional, but thorough testing has not yet been performed.</p>
<dl class="method">
<dt id="movies.Movie.extract_by_roi">
<code class="descname">extract_by_roi</code><span class="sig-paren">(</span><em>roi</em>, <em>method=&lt;function mean&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#movies.Movie.extract_by_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a time series consisting of one value for each movie frame, attained by performing an operation over the regions of interest (ROI) supplied</p>
<dl class="docutils">
<dt>roi <span class="classifier-delimiter">:</span> <span class="classifier">pyfluo.ROI</span></dt>
<dd>the rois over which to extract data</dd>
<dt>method <span class="classifier-delimiter">:</span> <span class="classifier">def </span></dt>
<dd>the function by which to convert the data within an ROI to a single value. Defaults to np.mean</dd>
</dl>
<p>Trace object, with multiple columns corresponding to multiple ROIs</p>
</dd></dl>

<dl class="method">
<dt id="movies.Movie.play">
<code class="descname">play</code><span class="sig-paren">(</span><em>loop=False</em>, <em>fps=None</em>, <em>scale=1</em>, <em>contrast=1.0</em>, <em>show_time=True</em>, <em>backend=&lt;module 'cv2' from '/Users/ben/anaconda/lib/python2.7/site-packages/cv2.so'&gt;</em>, <em>fontsize=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#movies.Movie.play" title="Permalink to this definition">¶</a></dt>
<dd><p>Play the movie</p>
<dl class="docutils">
<dt>loop <span class="classifier-delimiter">:</span> <span class="classifier">bool </span></dt>
<dd>repeat playback upon finishing</dd>
<dt>fps <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>playback rate in frames per second. Defaults to object&#8217;s fs attribute</dd>
<dt>scale <span class="classifier-delimiter">:</span> <span class="classifier">float </span></dt>
<dd>scaling factor to resize playback images</dd>
<dt>contrast <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>scaling factor for pixel values</dd>
<dt>show_time <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>show time on image</dd>
<dt>backend <span class="classifier-delimiter">:</span> <span class="classifier">module </span></dt>
<dd>package to use for playback (ex. pl or cv2)</dd>
<dt>fontsize <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>to display time</dd>
</dl>
<p>During playback, &#8216;q&#8217; can be used to quit when playback window has focus</p>
<p>Many params are not implemented in the matplotlib backend option</p>
</dd></dl>

<dl class="method">
<dt id="movies.Movie.project">
<code class="descname">project</code><span class="sig-paren">(</span><em>axis=0</em>, <em>method=&lt;function mean&gt;</em>, <em>show=False</em>, <em>roi=None</em>, <em>backend=&lt;module 'pylab' from '/Users/ben/anaconda/lib/python2.7/site-packages/pylab.pyc'&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#movies.Movie.project" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten/project the movie data across one or many axes</p>
<dl class="docutils">
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int, list</span></dt>
<dd>axis/axes over which to flatten</dd>
<dt>method <span class="classifier-delimiter">:</span> <span class="classifier">def</span></dt>
<dd>function to apply across the specified axes</dd>
<dt>show <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>display the result (if 2d, as image; if 1d, as trace)</dd>
<dt>roi <span class="classifier-delimiter">:</span> <span class="classifier">pyfluo.ROI </span></dt>
<dd>roi to display</dd>
<dt>backend <span class="classifier-delimiter">:</span> <span class="classifier">module</span></dt>
<dd>module used for interactive display (only matplotlib currently supported)</dd>
</dl>
<p>The projected image</p>
</dd></dl>

<dl class="method">
<dt id="movies.Movie.select_roi">
<code class="descname">select_roi</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#movies.Movie.select_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method for pyfluo.roi.select_roi(self.project(), <a href="#id1"><span class="problematic" id="id2">*</span></a>args, <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs)</p>
<dl class="docutils">
<dt>projection_method <span class="classifier-delimiter">:</span> <span class="classifier">def</span></dt>
<dd>&#8216;method&#8217; parameter for Movie.project, used in display</dd>
<dt><a href="#id5"><span class="problematic" id="id6">*</span></a>args, <a href="#id7"><span class="problematic" id="id8">**</span></a>kwargs</dt>
<dd>those accepted by pyfluo.roi.select_roi</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="roi">
<h2>ROI<a class="headerlink" href="#roi" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="roi.ROI">
<em class="property">class </em><code class="descclassname">roi.</code><code class="descname">ROI</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#roi.ROI" title="Permalink to this definition">¶</a></dt>
<dd><p>An object storing ROI information for 1 or more ROIs</p>
<dl class="docutils">
<dt>mask <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>a 2d boolean mask where True indicates interior of ROI</dd>
<dt>pts <span class="classifier-delimiter">:</span> <span class="classifier">list, np.ndarray</span></dt>
<dd>a list of points defining the border of ROI</dd>
<dt>shape <span class="classifier-delimiter">:</span> <span class="classifier">list, tuple</span></dt>
<dd>shape of the mask</dd>
</dl>
<p>There are 2 ways to define an ROI:
(1) Supply a mask
(2) Supply both pts and shape</p>
<p>In either case, the ROI object automatically resolves both the mask and points</p>
<dl class="method">
<dt id="roi.ROI.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>roi</em><span class="sig-paren">)</span><a class="headerlink" href="#roi.ROI.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an ROI to the ROI object</p>
<dl class="docutils">
<dt>roi <span class="classifier-delimiter">:</span> <span class="classifier">pyfluo.ROI, np.ndarray</span></dt>
<dd>the ROI to be added</dd>
</dl>
<p>ROI object containing old and new ROIs</p>
</dd></dl>

<dl class="method">
<dt id="roi.ROI.show">
<code class="descname">show</code><span class="sig-paren">(</span><em>mode='mask'</em>, <em>labels=True</em>, <em>cmap=&lt;matplotlib.colors.LinearSegmentedColormap object&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#roi.ROI.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the ROI(s)</p>
<dl class="docutils">
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">&#8216;mask&#8217;, &#8216;pts&#8217;</span></dt>
<dd>specifies how to display the ROIs. If &#8216;mask&#8217;, displays as filled space. If &#8216;pts&#8217;, displays as outline of points (those originally selected)</dd>
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>display labels over ROIs</dd>
<dt>cmap <span class="classifier-delimiter">:</span> <span class="classifier">matplotlib.LinearSegmentedColormap</span></dt>
<dd>color map for display. Options are found in pl.colormaps(), and are accessed as pl.cm.my_favourite_map</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>any arguments accepted by matplotlib.imshow</dd>
</dl>
<p>If mode==&#8217;mask&#8217;, the combined mask of all ROIs used for display</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Core Data Structures</a><ul>
<li><a class="reference internal" href="#traces">Traces</a></li>
<li><a class="reference internal" href="#movie">Movie</a></li>
<li><a class="reference internal" href="#roi">ROI</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">About this library</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="functions.html"
                        title="next chapter">Core Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/data_structures.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="functions.html" title="Core Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="About this library"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyfluo  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Ben Deverett.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>